use fourthbranch;
DROP PROCEDURE IF EXISTS getBillByCode;
DELIMITER // 
CREATE PROCEDURE getBillByCode ( IN code CHAR(40) ) 
BEGIN 
SELECT title,status,url,code,open FROM bills
WHERE code = bill_code;
END  
DELIMITER ; 

DROP PROCEDURE IF EXISTS updateBillStatus;
DELIMITER // 
CREATE PROCEDURE updateBillStatus ( IN updatedStatus CHAR(50) ) 
BEGIN 
UPDATE bills SET status = updatedStatus 
WHERE code = bill_code;
END  
DELIMITER ; 

DROP PROCEDURE IF EXISTS insertBill;
DELIMITER // 
CREATE PROCEDURE insertBill ( IN title TEXT , IN status VARCHAR(50) , IN url TEXT , IN code VARCHAR(50) , IN local_html TEXT , IN open VARCHAR(5) , IN local_json TEXT , IN local_xml TEXT , IN isLargeBill CHAR(1) , IN isAppropiationBill CHAR(1) ) 
BEGIN 
INSERT INTO bills (local_xml,url,local_json,isAppropiationBill,open,code,isLargeBill,local_html,status,title) VALUES (local_xml , url , local_json , is_appropiation_bill , open , code , is_large_bill , local_html , status , title) ;
END 
DELIMITER ; 

DROP PROCEDURE IF EXISTS deleteBillByCode;
DELIMITER // 
CREATE PROCEDURE deleteBillByCode ( IN deleteCode CHAR(40) ) 
BEGIN 
DELETE FROM bills
WHERE code = deleteCode;
END  
DELIMITER ; 

DROP PROCEDURE IF EXISTS makeBillLargeBill;
DELIMITER // 
CREATE PROCEDURE makeBillLargeBill ( IN isLargeBill CHAR(1) , IN billid MEDIUMINT ) 
BEGIN 
UPDATE bills SET is_large_bill = isLargeBill 
WHERE billid = id;
END  
DELIMITER ; 

DROP PROCEDURE IF EXISTS makeBillAppropiationBill;
DELIMITER // 
CREATE PROCEDURE makeBillAppropiationBill ( IN isAppropiationBill CHAR(1) , IN billid MEDIUMINT ) 
BEGIN 
UPDATE bills SET is_appropiation_bill = isAppropiationBill 
WHERE billid = id;
END  
DELIMITER ; 

